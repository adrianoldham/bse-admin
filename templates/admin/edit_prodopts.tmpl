<:-.wrap "admin/base.tmpl", "title": "New Option" :>

<:-.set referer = request.referer -:>
<:-.set cgi_referer = cgi.param("referer") -:>

<:-.if referer =~ cfg.admin_url("admin") -:>
<:-.set done_url = cfg.admin_url("add", { "id": ( cgi_referer ? cgi_referer : article.id ), "preview": 1 }) -:>

<:-.elsif cgi_referer and referer -:>
<:-.set done_url = referer.replace(/(&amp;|\?)referer=[\d]+/, "") -:>

<:-.else -:>
<:-.set done_url = cfg.admin_url("add", { "id": article.id }) -:>

<:-.end if -:>

<div class="window dialog">
  <header>
    <:-.set pagetitle = params.title _ " - " _ ( article.titleAlias or article.title ) _ " (Level " _ article.level _ ")" :>
    <h1><:= pagetitle:></h1>
  </header>
  <form action="<:script:>" method="post" data-object="Option">
    <:csrfp admin_add_option hidden:>
    <input type="hidden" name="_t" value="prodopts" />
    <input type="hidden" name="id" value="<:article id:>" />
    <input type="hidden" name="r" value="<:switch:><:case Cgi r:><:cgi r:><:case default:><:script:>?id=<:article id:><:endswitch:>" />
    <fieldset>
      <legend>Option</legend>
      <div>
        <label>Name <span class="required">*</span> <:error_img name:></label>
        <span>
          <input type="text" name="name" value="<:old name:>" required="required" autofocus="autofocus" class="<:ifError_img name:>error<:eif:>" />
        </span>
      </div>
      <!--<div>
        <label for="enabled">Enabled <:error_img enabled:></label>
        <span>
          <input type="checkbox" name="enabled" id="enabled" value="1" <:ifOld enabled:>checked="checked" <:eif:>/>
          <input type="hidden" name="save_enabled" value="1" />
          <:help edit enabled:>
        </span>
      </div>
      <div>
        <label for="type">HTML Type <:error_img type:></label>
        <span>
          <select name="type" id="type">
            <option value="select"<:ifMatch [old type] "select":> selected="selected"<:eif:>>Select Popup</option>
            <option value="radio"<:ifMatch [old type] "radio":> selected="selected"<:eif:>>Radio Buttons</option>
          </select>
          <:help edit type:>
        </span>
      </div>-->
    </fieldset>
    <fieldset>
      <legend>Values</legend>
      <div>
        <label for="value1">#1 <span class="required">*</span> <:error_img value1:> <!--<input type="radio" name="default_value" value="value1" <:ifEq [old default_value] "value1":>checked="checked"<:eif:> />--></label>
        <span>
          <input type="text" name="value1" id="value1" value="<:old value1:>" required="required" class="<:ifError_img value1:>error<:eif:>" />
        </span>
      </div>
      <div>
        <label for="value2">#2 <span class="required">*</span> <:error_img value2:> <!--<input type="radio" name="default_value" value="value2" <:ifEq [old default_value] "value2":>checked="checked"<:eif:> />--></label>
        <span>
          <input type="text" name="value2" id="value2" value="<:old value2:>" required="required" class="<:ifError_img value2:>error<:eif:>" />
        </span>
      </div>
      <div>
        <label for="value3">#3 <:error_img value3:> <!--<input type="radio" name="default_value" value="value3" <:ifEq [old default_value] "value3":>checked="checked"<:eif:> />--></label>
        <span>
          <input type="text" name="value3" id="value3" value="<:old value3:>" class="<:ifError_img value3:>error<:eif:>" />
        </span>
      </div>
      <div>
        <label for="value4">#4 <:error_img value4:> <!--<input type="radio" name="default_value" value="value4" <:ifEq [old default_value] "value4":>checked="checked"<:eif:> />--></label>
        <span>
          <input type="text" name="value4" id="value4" value="<:old value4:>" class="<:ifError_img value4:>error<:eif:>" />
        </span>
      </div>
      <div>
        <label for="value5">#5 <:error_img value5:> <!--<input type="radio" name="default_value" value="value5" <:ifEq [old default_value] "value5":>checked="checked"<:eif:> />--></label>
        <span>
          <input type="text" name="value5" id="value5" value="<:old value5:>" class="<:ifError_img value5:>error<:eif:>" />
        </span>
      </div>
    </fieldset>
    <p class="buttons">
      <a href="<:= done_url:>" accesskey="." title="AccessKey = ." data-action="Cancel" class="button white">Cancel</a>
      <:- if UserCan bse_edit_prodopt_add:article:>
      <input type="submit" name="a_add_option" value="Create Option" accesskey="c" title="AccessKey = c" class="button green" />
      <:- eif UserCan:>
    </p>
  </form>
</div>