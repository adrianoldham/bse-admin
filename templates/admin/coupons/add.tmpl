<:-.wrap "admin/base.tmpl", "title": "New Coupon" :>
<div class="window dialog">
  <header>
    <h1><:= params.title :></h1>
    <a href="<:= cfg.admin_url("menu") :>" accesskey="m" title="AccessKey = m" data-widget="close">Quick Launch</a>
  </header>
  <:-.set object = coupon :>
  <form action="<:= cfg.admin_url("shopadmin") :>" method="post" data-object="Coupon">
    <:csrfp admin_bse_coupon_add hidden :>
    <fieldset>
      <legend>Coupon</legend>
      <:.call "field", "name":"code", "options":{ "autofocus":1 } :>
      <:.call "field", "name":"description" :>
      <:.call "field", "name":"discount_percent", "options":{ "placeholder":"%" } :>
      <:.call "field", "name":"campaign" :>
    </fieldset>
    <fieldset>
      <legend>Validity</legend>
      <:.call "field", "name":"release", "options":{ "placeholder":"DD/MM/YYYY" } :>
      <:.call "field", "name":"expiry", "options":{ "placeholder":"DD/MM/YYYY" } :>
    </fieldset>
    <:-.if tiers.size != 0 :>
    <:.call "fieldset", "name":"tiers" :>
    <:-.else :>
    <input type="hidden" name="tiers" value="0" />
    <:-.end if :>
    <p class="buttons">
      <a href="<:switch:><:case Cgi r:><:cgi r:><:case And [cgi referer] [referer]:><:replace [referer] "&amp;referer=[0-9]+":><:case default:><:adminurl menu:><:endswitch:>" accesskey="." title="AccessKey = ." data-action="Cancel" class="button white">Cancel</a>
      <:-.if request.user_can("bse_shop_coupon_add") :>
      <input type="submit" name="a_coupon_add" value="Create Coupon" accesskey="c" title="AccessKey = c" class="button green" />
      <:-.end if :>
    </p>
  </form>
</div>