[reports]
sales_summ_by_product=Sales Summary By Product
product_sales_over_time=Product Sales Over Time
weekly_sales=Weekly Sales
monthly_sales=Monthly Sales
quarterly_sales=Quarterly Sales
yearly_sales=Yearly Sales
total_sales=Total Sales
users_vs_orders=Users vs Orders
user_products=Products Bought By User
orders=Orders
modified_articles=Articles Recently Modified
order_item_units=Order Item Units

[report sales_summ_by_product]
sql1=<<SQL
SELECT pr.articleId AS "Id", ar.title AS "Product", SUM(oi.units) AS "Units"
FROM article ar, product pr, order_item oi, orders od
WHERE ar.id = pr.articleId
  AND pr.articleId = oi.productId
  AND oi.orderId = od.id
  AND (? = 0 OR YEAR(od.orderDate) = ?)
  AND (? = 0 OR MONTH(od.orderDate) = ?)
GROUP BY pr.articleId, ar.title
ORDER BY Units DESC, Product
SQL
sql1link1=<a href="/cgi-bin/admin/report.pl?s_show=1&r=product_sales_over_time&p1=${Id}&referer=1" class="button green small">Sales</a>
sql1link2=<a href="/cgi-bin/admin/add.pl?id=${Id}&referer=1" class="button gray small">Edit</a>
bse_rights=bse_reports_list|bse_shop_admin
param1=order_date_year,Year
param2=order_date_month,Month
sql1params=1,1,2,2

[report product_sales_over_time]
sql1=<<SQL
SELECT YEAR(od.orderDate) AS "Year", DATE_FORMAT(od.orderDate,'%M') AS "Month", COUNT(*) AS "Units" 
FROM order_item oi, orders od 
WHERE oi.orderId = od.id 
  AND productId = ? 
GROUP BY YEAR(od.orderDate), MONTH(od.orderDate)
SQL
sql1params=1
param1=product,Product
bse_rights=bse_reports_list|bse_shop_admin
sort1=-Year;by Year Descending;ORDER BY Year DESC, MONTH(od.orderDate) DESC
sort2=+Year;by Year Ascending;ORDER BY Year ASC, MONTH(od.orderDate) ASC
sort3=-Month;by Month Descending;ORDER BY MONTH(od.orderDate) DESC
sort4=+Month;by Month Ascending;ORDER BY MONTH(od.orderDate) ASC
sort5=-Units;by Units Descending;ORDER BY Units DESC
sort6=+Units;by Units Ascending;ORDER BY Units ASC

[report weekly_sales]
sql1=<<SQL
SELECT YEAR(od.orderDate) AS "Year", WEEK(od.orderDate) AS "Week", CONCAT('$', FORMAT(SUM(od.total)/100.0,2)) AS "Total", COUNT(*) AS "Orders", COUNT(su.userId) AS "User_Orders" 
FROM orders od 
LEFT JOIN bse_siteusers su
  ON od.userId = su.userId 
WHERE (? = 0 OR YEAR(od.orderDate) = ?)
GROUP BY YEAR(od.orderDate), WEEK(od.orderDate)
SQL
param1=order_date_year,Year
sql1params=1,1
bse_rights=bse_reports_list|bse_shop_admin
sort1=-Year;by Year Descending;ORDER BY Year DESC, Week DESC
sort2=+Year;by Year Ascending;ORDER BY Year ASC, Week ASC
sort3=-Week;by Week Descending;ORDER BY Week DESC
sort4=+Week;by Week Ascending;ORDER BY Week ASC
sort5=-Total;by Total Descending;ORDER BY od.total DESC
sort6=+Total;by Total Ascending;ORDER BY od.total ASC
sort7=-Orders;by Orders Descending;ORDER BY Orders DESC
sort8=+Orders;by Orders Ascending;ORDER BY Orders ASC
sort9=-User_Orders;by User_Orders Descending;ORDER BY User_Orders DESC
sort10=+User_Orders;by User_Orders Ascending;ORDER BY User_Orders ASC

[report monthly_sales]
sql1=<<SQL
SELECT YEAR(od.orderDate) AS "Year", DATE_FORMAT(od.orderDate,'%M') AS "Month", CONCAT('$', FORMAT(SUM(od.total)/100.0,2)) AS "Total", COUNT(*) AS "Orders", COUNT(su.userId) AS "User_Orders" 
FROM orders od 
LEFT JOIN bse_siteusers su 
  ON od.userId = su.userId 
WHERE (? = 0 OR YEAR(od.orderDate) = ?)
GROUP BY YEAR(od.orderDate), MONTH(od.orderDate)
SQL
param1=order_date_year,Year
sql1params=1,1
bse_rights=bse_reports_list|bse_shop_admin
sort1=-Year;by Year Descending;ORDER BY Year DESC, MONTH(od.orderDate) DESC
sort2=+Year;by Year Ascending;ORDER BY Year ASC, MONTH(od.orderDate) ASC
sort3=-Month;by Month Descending;ORDER BY MONTH(od.orderDate) DESC
sort4=+Month;by Month Ascending;ORDER BY MONTH(od.orderDate) ASC
sort5=-Total;by Total Descending;ORDER BY od.total DESC
sort6=+Total;by Total Ascending;ORDER BY od.total ASC
sort7=-Orders;by Orders Descending;ORDER BY Orders DESC
sort8=+Orders;by Orders Ascending;ORDER BY Orders ASC
sort9=-User_Orders;by User_Orders Descending;ORDER BY User_Orders DESC
sort10=+User_Orders;by User_Orders Ascending;ORDER BY User_Orders ASC

[report quarterly_sales]
sql1=<<SQL
SELECT YEAR(od.orderDate) AS "Year", QUARTER(od.orderDate) AS "Quarter", CONCAT('$', FORMAT(SUM(od.total)/100.0,2)) AS "Total", COUNT(*) AS "Orders", COUNT(su.userId) AS "User_Orders" 
FROM orders od 
LEFT JOIN bse_siteusers su 
  ON od.userId = su.userId GROUP BY YEAR(od.orderDate), QUARTER(od.orderDate)
SQL
bse_rights=bse_reports_list|bse_shop_admin
sort1=-Year;by Year Descending;ORDER BY Year DESC, Quarter DESC
sort2=+Year;by Year Ascending;ORDER BY Year ASC, Quarter ASC
sort3=-Quarter;by Quarter Descending;ORDER BY Quarter DESC
sort4=+Quarter;by Quarter Ascending;ORDER BY Quarter ASC
sort5=+Total;by Total Ascending;ORDER BY od.total ASC
sort6=-Total;by Total Descending;ORDER BY od.total DESC
sort7=+Orders;by Orders Ascending;ORDER BY Orders ASC
sort8=-Orders;by Orders Descending;ORDER BY Orders DESC
sort9=+User_Orders;by User_Orders Ascending;ORDER BY User_Orders ASC
sort10=-User_Orders;by User_Orders Descending;ORDER BY User_Orders DESC

[report yearly_sales]
sql1=<<SQL
SELECT YEAR(od.orderDate) AS "Year", CONCAT('$', FORMAT(SUM(od.total)/100.0,2)) AS "Total", COUNT(*) AS "Orders", COUNT(su.userId) AS "User_Orders" 
FROM orders od 
LEFT JOIN bse_siteusers su 
  ON od.userId = su.userId GROUP BY YEAR(od.orderDate)
SQL
bse_rights=bse_reports_list|bse_shop_admin
sort1=-Year;by Year Descending;ORDER BY Year DESC
sort2=+Year;by Year Ascending;ORDER BY Year ASC
sort3=-Total;by Total Descending;ORDER BY od.total DESC
sort4=+Total;by Total Ascending;ORDER BY od.total ASC
sort5=-Orders;by Orders Descending;ORDER BY Orders DESC
sort6=+Orders;by Orders Ascending;ORDER BY Orders ASC
sort7=-User_Orders;by User_Orders Descending;ORDER BY User_Orders DESC
sort8=+User_Orders;by User_Orders Ascending;ORDER BY User_Orders ASC

[report total_sales]
sql1=<<SQL
SELECT CONCAT('$', FORMAT(SUM(od.total)/100.0,2)) AS "Total", COUNT(*) AS "Orders", COUNT(su.userId) AS "User_Orders" 
FROM orders od 
LEFT JOIN bse_siteusers su 
  ON od.userId = su.userId
SQL
bse_rights=bse_reports_list|bse_shop_admin

[report users_vs_orders]
sql1=<<SQL
SELECT od.billFirstName AS "First_Name", od.billLastName AS "Last_Name", od.userId AS "Username", CONCAT('$', FORMAT(SUM(od.total)/100.0,2)) AS "Total", COUNT(*) AS "Orders" 
FROM orders od 
GROUP BY od.billFirstName, od.billLastName 
SQL
bse_rights=bse_reports_list|bse_shop_admin
sort1=-Total;by Total Descending;ORDER BY od.total DESC
sort2=+Total;by Total Ascending;ORDER BY od.total ASC
sort3=-Orders;by Total Descending;ORDER BY od.total DESC
sort4=+Orders;by Total Ascending;ORDER BY od.total ASC
sort5=-Username;by User Descending;ORDER BY Username DESC
sort6=+Username;by User Ascending;ORDER BY Username ASC
sort7=-First_Name;by First Name Descending;ORDER BY First_Name DESC
sort8=+First_Name;by First Name Ascending;ORDER BY First_Name ASC
sort9=-Last_Name;by Last Name Descending;ORDER BY Last_Name DESC
sort10=+Last_Name;by Last Name Ascending;ORDER BY Last_Name ASC

[report orders]
sql1=<<SQL
SELECT LPAD(od.id, 6, '0') AS "Order_No", DATE_FORMAT(od.orderDate,'%d-%b-%Y') AS "Date", CONCAT('$',FORMAT(od.total/100.0,2)) AS "Total", od.stage AS "Status", 
  IF(od.paidFor = 0, 'Unpaid', 'Paid') AS "Payment", 
  IF(od.filled = 0, '-', DATE_FORMAT(od.whenFilled,'%d-%b-%Y')) AS "Filled", 
  IF(od.whoFilled = '', '-', od.whoFilled) AS "Who" 
FROM orders od 
WHERE (? = 0 OR YEAR(od.orderDate) = ?) 
  AND (? = 0 OR MONTH(od.orderDate) = ?) 
  AND (? = '*' OR od.stage = ?) 
  AND (? = '*' OR od.paidFor = ?)
SQL
sql1link1=<a href="/cgi-bin/admin/nadmin.pl/shopadmin?order_detail=1&id=${Order_No}&referer=1" class="button gray small">Details</a>
bse_rights=bse_reports_list|bse_shop_admin
sql1params=1,1,2,2,3,3,4,4
param1=order_date_year,Year
param2=order_date_month,Month
param3=order_stage,Status
param4=paid,Payment
sort1=+Order_No;by Order No. Ascending;ORDER BY Order_No ASC
sort2=-Order_No;by Order No. Descending;ORDER BY Order_No DESC
sort3=+Date;by Date Ascending;ORDER BY od.orderDate ASC
sort4=-Date;by Date Descending;ORDER BY od.orderDate DESC
sort5=+Total;by Total Ascending;ORDER BY od.total ASC
sort6=-Total;by Total Descending;ORDER BY od.total DESC
sort7=+Status;by Status Ascending;ORDER BY Status ASC
sort8=-Status;by Status Descending;ORDER BY Status DESC
sort9=+Payment;by Payment Ascending;ORDER BY Payment ASC
sort10=-Payment;by Payment Descending;ORDER BY Payment DESC
sort11=+Filled;by Filled Ascending;ORDER BY Filled ASC
sort12=-Filled;by Filled Descending;ORDER BY Filled DESC
sort13=+Who;by Who Ascending;ORDER BY Who ASC
sort14=-Who;by Who Descending;ORDER BY Who DESC

[report user_products]
sql1=<<SQL
SELECT pr.title AS "Product", COUNT(*) AS "Units" 
FROM orders od, order_item oi, article pr, bse_siteusers su 
WHERE oi.orderId = od.id 
  AND oi.productId = pr.id 
  AND su.userId = od.userId 
  AND su.id = ? 
GROUP BY pr.id
SQL
sql1params=1
param1=siteuser,User
bse_rights=bse_reports_list|bse_shop_admin
sort1=+Product;by Product Ascending;ORDER BY Product ASC
sort2=-Product;by Product Descending;ORDER BY Product DESC
sort3=+Units;by Units Ascending;ORDER BY Units ASC
sort4=-Units;by Units Descending;ORDER BY Units DESC

[report modified_articles]
sql1=<<SQL
SELECT ar.id AS "Id", ar.title AS "Title", DATE_FORMAT(ar.lastModified,'%d-%b-%Y / %r') AS "Last_Modified", 
  IF(DATE_FORMAT(ar.created, '%Y%m%d') = DATE_FORMAT(ar.lastModified,'%Y%m%d'), 'Yes', '-') AS "New", ar.lastModifiedBy AS "Who" 
FROM article ar 
WHERE DATE_SUB(CURDATE(), INTERVAL 30 DAY)
SQL
sql1link1=<a href="/cgi-bin/admin/add.pl?id=${Id}" class="button gray small">Edit</a>
sql1link2=<a href="/cgi-bin/admin/add.pl?id=${Id}&amp;preview=1" class="button gray small">Preview</a>
bse_rights=bse_reports_list
sort1=-Last_Modified;by Last Modified Descending;ORDER BY ar.lastModified DESC
sort2=+Last_Modified;by Last Modified Ascending;ORDER BY ar.lastModified ASC
sort3=+Title;by Title Ascending;ORDER BY Title ASC
sort4=-Title;by Title Descending;ORDER BY Title DESC
sort5=+Id;by Id Ascending;ORDER BY Id ASC
sort6=-Id;by Id Descending;ORDER BY Id DESC
sort7=+Who;by Who Ascending;ORDER BY Who ASC
sort8=-Who;by Who Descending;ORDER BY Who DESC
sort9=+New;by New Ascending;ORDER BY New ASC
sort10=-New;by New Descending;ORDER BY New DESC

[report order_item_units]
sql1=<<SQL
SELECT LPAD(od.id, 6, '0') as "Order_No", DATE_FORMAT(od.orderDate,'%d-%b-%Y') as "Date", oi.title AS "Product", oi.product_code as "Product_Code", oi.units as "Units"
FROM order_item oi, orders od
WHERE od.id = oi.orderId
  AND (? = 0 OR YEAR(od.orderDate) = ?)
  AND (? = 0 OR MONTH(od.orderDate) = ?)
SQL
sql1link1=<a href="/cgi-bin/admin/nadmin.pl/shopadmin?order_detail=1&id=${Order_No}&referer=1" class="button gray small">Details</a>
bse_rights=bse_reports_list|bse_shop_admin
param1=order_date_year,Year
param2=order_date_month,Month
sql1params=1,1,2,2
sort1=+Order_No;by Order No. Ascending;ORDER BY Order_No ASC
sort2=-Order_No;by Order No. Descending;ORDER BY Order_No DESC
sort3=+Date;by Date Ascending;ORDER BY Date ASC
sort4=-Date;by Date Descending;ORDER BY Date DESC
sort5=+Product;by Product Ascending;ORDER BY Product ASC
sort6=-Product;by Product Descending;ORDER BY Product DESC
sort7=+Product_Code;by Product Code Ascending;ORDER BY Product_Code ASC
sort8=-Product_Code;by Product Code Descending;ORDER BY Product_Code DESC
sort9=+Units;by Units Ascending;ORDER BY Units ASC
sort10=-Units;by Units Descending;ORDER BY Units DESC

[report datatype product]
type=sql
sql=<<SQL
SELECT ar.id AS "id", ar.title AS "label" 
FROM article ar, product pr 
WHERE ar.id = pr.articleId 
ORDER BY label
SQL
novalues=You don't have any products

[report datatype article]
type=sql
sql=<<SQL
SELECT ar.id AS "id", CONCAT(ar.title, ' (', ar.id, ')') AS "label" 
FROM article ar
SQL

[report datatype siteuser]
type=sql
sql=<<SQL
SELECT su.id AS "id", CONCAT(su.userId, ' - (', su.name1, ' ', su.name2, ')') AS "label" 
FROM bse_siteusers su
SQL
novalues=There are no registered users

[report datatype order_date_year]
type=sql
sql=<<SQL
SELECT 0 AS "value", 'Any' AS "label" 
UNION SELECT DISTINCT YEAR(od.orderDate) AS "value", YEAR(od.orderDate) AS "label" 
FROM orders od
ORDER BY value
SQL
novalues=There are no order years available

[report datatype order_date_month]
type=sql
sql=<<SQL
SELECT 0 AS "value", 'Any' AS "label" 
UNION SELECT DISTINCT MONTH(od.orderDate) AS "value", DATE_FORMAT(od.orderDate,'%M') AS "label" 
FROM orders od 
ORDER BY value
SQL
novalues=There are no order months available

[report datatype order_stage]
type=sql
sql=<<SQL
SELECT '*' AS "value", 'Any' AS "label" 
UNION SELECT DISTINCT od.stage AS "value", msg.message AS "label" 
FROM bse_msg_defaults msg, orders od 
WHERE msg.id = CONCAT('bse/shop/orderstages/',od.stage)
SQL
novalues=There are no order stages available

[report datatype paid]
values=*,1,0
labels=Any,Paid,Unpaid
type=enum
