[reports]
sales_summ_by_product=Sales Summary By Product
product_sales_over_time=Product Sales Over Time
weekly_sales=Weekly Sales
monthly_sales=Monthly Sales
quarterly_sales=Quarterly Sales
yearly_sales=Yearly Sales
total_sales=Total Sales
users_vs_orders=Users vs Orders
user_products=Products bought by User

[report sales_summ_by_product]
sql1=SELECT pr.articleId AS 'Id', ar.title AS 'Product', COUNT(*) AS 'Units' FROM article ar, product pr, order_item oi WHERE ar.id = pr.articleId AND pr.articleId = oi.productId GROUP BY pr.articleId, ar.title ORDER BY 3 DESC, 2
sql1link1=<a href="/cgi-bin/admin/report.pl?s_show=1&r=product_sales_over_time&p1=${Id}&referer=1" class="button green small">Sales</a>
sql1link2=<a href="/cgi-bin/admin/add.pl?id=${Id}" class="button gray small">Edit</a>
bse_rights=bse_reports_list|bse_shop_admin

[report product_sales_over_time]
sql1=SELECT YEAR(od.orderDate) AS 'Year', DATE_FORMAT(od.orderDate,'%M') AS 'Month', COUNT(*) AS 'Units' FROM order_item oi, orders od WHERE oi.orderId = od.id AND productId = ? GROUP BY YEAR(od.orderDate), MONTH(od.orderDate) ORDER BY 1 DESC, 2 DESC
sql1params=1
param1=product,Product
bse_rights=bse_reports_list|bse_shop_admin

[report weekly_sales]
sql1=SELECT YEAR(od.orderDate) AS 'Year', WEEK(od.orderDate) AS 'Week', CONCAT('$', FORMAT(SUM(od.total)/100.0,2)) AS 'Total', COUNT(*) AS 'Orders', COUNT(su.userId) AS 'User_Orders' FROM orders od LEFT JOIN bse_siteusers su ON od.userId = su.userId GROUP BY YEAR(od.orderDate), WEEK(od.orderDate) ORDER BY 1 DESC, 2 DESC
bse_rights=bse_reports_list|bse_shop_admin

[report monthly_sales]
sql1=SELECT YEAR(od.orderDate) AS 'Year', DATE_FORMAT(od.orderDate,'%M') AS 'Month', CONCAT('$', FORMAT(SUM(od.total)/100.0,2)) AS 'Total', COUNT(*) AS 'Orders', COUNT(su.userId) AS 'User_Orders' FROM orders od LEFT JOIN bse_siteusers su ON od.userId = su.userId GROUP BY YEAR(od.orderDate), MONTH(od.orderDate) ORDER BY 1 DESC, 2 DESC
bse_rights=bse_reports_list|bse_shop_admin

[report quarterly_sales]
sql1=SELECT YEAR(od.orderDate) AS 'Year', QUARTER(od.orderDate) AS 'Quarter', CONCAT('$', FORMAT(SUM(od.total)/100.0,2)) AS 'Total', COUNT(*) AS 'Orders', COUNT(su.userId) AS 'User_Orders' FROM orders od LEFT JOIN bse_siteusers su ON od.userId = su.userId GROUP BY YEAR(od.orderDate), QUARTER(od.orderDate) ORDER BY 1 DESC, 2 DESC
bse_rights=bse_reports_list|bse_shop_admin

[report yearly_sales]
sql1=SELECT YEAR(od.orderDate) AS 'Year', CONCAT('$', FORMAT(SUM(od.total)/100.0,2)) AS 'Total', COUNT(*) AS 'Orders', COUNT(su.userId) AS 'User_Orders' FROM orders od LEFT JOIN bse_siteusers su ON od.userId = su.userId GROUP BY YEAR(od.orderDate) ORDER BY 1 DESC
bse_rights=bse_reports_list|bse_shop_admin

[report total_sales]
sql1=SELECT CONCAT('$', FORMAT(SUM(od.total)/100.0,2)) AS 'Total', COUNT(*) AS 'Orders', COUNT(su.userId) AS 'User_Orders' FROM orders od LEFT JOIN bse_siteusers su ON od.userId = su.userId
bse_rights=bse_reports_list|bse_shop_admin

[report users_vs_orders]
sql1=SELECT od.billFirstName AS 'First Name', od.billLastName AS 'Last Name', od.userId AS 'User', CONCAT('$', FORMAT(SUM(od.total)/100.0,2)) AS 'Total', COUNT(*) AS 'Orders' FROM orders od GROUP BY od.billFirstName, od.billLastName ORDER BY 5 DESC, 2
bse_rights=bse_reports_list|bse_shop_admin

[report user_products]
sql1=SELECT pr.title AS 'Title', COUNT(*) AS 'Units' FROM orders od, order_item oi, article pr, bse_siteusers su WHERE oi.orderId = od.id AND oi.productId = pr.id AND su.userId = od.userId AND su.id = ? GROUP BY pr.id
sql1params=1
param1=siteuser,User
bse_rights=bse_reports_list|bse_shop_admin

[report datatype product]
type=sql
sql=SELECT ar.id AS 'id', ar.title AS 'label' FROM article ar, product pr WHERE ar.id = pr.articleId ORDER BY 2
novalues=You don't have any products

[report datatype article]
type=sql
sql=SELECT ar.id AS 'id', CONCAT(ar.title, ' (', ar.id, ')') AS 'label' FROM article ar

[report datatype siteuser]
type=sql
sql=SELECT su.id AS 'id', CONCAT(su.userId, ' - (', su.name1, ' ', su.name2, ')') AS 'label' FROM bse_siteusers su
novalues=There are no registered users
